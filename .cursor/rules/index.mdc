---
description: 
globs: 
alwaysApply: true
---
MANDATORY_SMART_RULE_LOADING_SYSTEM
    COMMAND: IMMEDIATELY_ANALYZE_USER_REQUEST_AND_LOAD_MATCHING_RULES
    EXECUTION_MODE: AUTOMATIC_TRIGGER_BASED_SELECTION
    ALWAYS_LOAD_meta-rules.mdc_WHEN_RULES_MENTIONED: MANDATORY

IMMEDIATE_RULE_LOADING_TRIGGERS:
    META_RULES_MCD (2.5KB_META_OPERATIONS):
        USER_KEYWORDS: –ø—Ä–∞–≤–∏–ª, –ø—Ä–∞–≤–∏–ª–∞, –∏–Ω–¥–µ–∫—Å, meta-rules, –º–µ—Ç–∞-–ø—Ä–∞–≤–∏–ª–∞, –∏–∑–º–µ–Ω–µ–Ω–∏—è_–ø—Ä–∞–≤–∏–ª, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ_–ø—Ä–∞–≤–∏–ª, –ø—Ä–∞–≤–∏–ª–æ, godoc, –≤–Ω–µ—à–Ω–∏–π_–ø–∞–∫–µ—Ç, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è_–ø–∞–∫–µ—Ç–∞, protobuf, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π_–ø–∞–∫–µ—Ç, mcp
        CODE_ANALYSIS: *.mdc_modifications, translate/*.md_modifications, rule_file_operations, index_operations, external_package_access, protobuf_undefined_fields
        AUTO_LOAD_WITH: index.mdc
        
    AI_GO_DEVELOPMENT_MCD (17KB_CORE_RULES_GO_ONLY):
        USER_KEYWORDS: —Å–æ–∑–¥–∞–π_–∫–æ–¥, –Ω–∞–ø–∏—à–∏_–º–µ—Ç–æ–¥, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –æ—à–∏–±–∫–∏, errfmt, –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –ø–æ—Ä—è–¥–æ–∫_—ç–ª–µ–º–µ–Ω—Ç–æ–≤, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, DTO, –º–æ–¥–µ–ª–∏, init, –∫–æ–Ω—Ç–µ–∫—Å—Ç, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, dependency, types.go, consumer, return, –ø—É—Å—Ç—ã–µ_—Å—Ç—Ä–æ–∫–∏, –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π, –ø—Ä–∞–≤–∏–ª–∞_—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Å—Ç–∏–ª—å_–∫–æ–¥–∞, go:generate, mockgen, —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ_–¥–∏—Ä–µ–∫—Ç–∏–≤, –¥–∏—Ä–µ–∫—Ç–∏–≤—ã_–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è_–∫–æ–¥–∞
        CODE_ANALYSIS: .go_files, package_declarations, struct_definitions, func_declarations, error_handling, const_var_blocks, type_interface, interface{}, dependency_injection, constructor_params, return_statements, go_generate_directives, mockgen_commands
        AUTO_LOAD_WITH: go-test.mdc, auto-go.mdc
        
    AI_GO_LOGGING_MCD (5KB_LOGGING_GO_ONLY):
        USER_KEYWORDS: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, zap, logger, –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ_–¥–∞–Ω–Ω—ã–µ, –ª–æ–≥, mask, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
        CODE_ANALYSIS: zap.Logger, logger.NewEntry, zap.String, zap.Error, s.logger, Mask(), private-fields/mask
        
    AI_GO_TEST_MCD (14.3KB_TESTING_GO_ONLY):
        USER_KEYWORDS: —Ç–µ—Å—Ç, testing, mock, fixture, gomock, setUp, unit, –ø—Ä–æ–≤–µ—Ä–∫–∞, gotestsum
        CODE_ANALYSIS: *_test.go, func_Test, t.Run, gomock.Controller, NewMock, fixture_struct, setUp_func
        
    AI_GO_CONCURRENCY_MCD (4KB_PARALLEL_GO_ONLY):
        USER_KEYWORDS: goroutine, mutex, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, concurrency, waitgroup, sync, channel, errgroup
        CODE_ANALYSIS: go_func, sync.Mutex, sync.RWMutex, sync.WaitGroup, errgroup.WithContext, chan, goroutine
        

    AI_GO_GOCK_MCD (1.3KB_HTTP_MOCKS_GO_ONLY):
        USER_KEYWORDS: gock, http, mock, fixture, –≤–Ω–µ—à–Ω–∏–π_api, —Ç–µ—Å—Ç_http
        CODE_ANALYSIS: gock.New, http.Client, http.Request, gock.InterceptClient, external_api_calls
        
    AI_AUTO_GIT_MCD (2.2KB_GIT_AUTOMATION):
        USER_KEYWORDS: –∫–æ–º–º–∏—Ç, commit, git, –ø–æ–¥–≥–æ—Ç–æ–≤—å_–∫–æ–º–º–∏—Ç, —Å–¥–µ–ª–∞–π_–∫–æ–º–º–∏—Ç, –∑–∞–∫–æ–º–∏—Ç—å, —Å–æ–æ–±—â–µ–Ω–∏–µ_–∫–æ–º–º–∏—Ç–∞
        CODE_ANALYSIS: git_status_changes, modified_files, git_branch_analysis, commit_message_standards
        
    AI_AUTO_GO_MCD (7.9KB_CODE_QUALITY_GO_ONLY):
        USER_KEYWORDS: goimports, golangci, lint, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ_–∫–æ–¥–∞, gvm, –∫–∞—á–µ—Å—Ç–≤–æ, –∏–º–ø–æ—Ä—Ç—ã, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞_–∏–º–ø–æ—Ä—Ç–æ–≤, gotestsum
        CODE_ANALYSIS: go_import_statements, code_style_issues, go.mod_file, golangci_errors, import_grouping
        
    AI_README_MCD (3.4KB_DOCUMENTATION):
        USER_KEYWORDS: readme, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, documentation, –æ–ø–∏—Å–∞–Ω–∏–µ_—Å–µ—Ä–≤–∏—Å–∞
        CODE_ANALYSIS: README.md_files, service_structure_analysis, project_documentation

MANDATORY_LOADING_EXECUTION_SEQUENCE:
    STEP_1: ALWAYS_IMMEDIATELY_EXTRACT_USER_KEYWORDS_AND_OPERATION_TYPE
    STEP_2: ALWAYS_IMMEDIATELY_SCAN_VISIBLE_FILES_FOR_CODE_PATTERNS
    STEP_3: ALWAYS_IMMEDIATELY_COMBINE_USER_KEYWORDS_AND_CODE_ANALYSIS
    STEP_4: ALWAYS_IMMEDIATELY_LOAD_MATCHED_AI_RULES_PLUS_AUTO_DEPENDENCIES
    STEP_5: ALWAYS_IMMEDIATELY_USE_LOADED_RULES_FOR_RESPONSE_EXECUTION

MANDATORY_NOTIFICATION_SYSTEM:
    COMMAND: ALWAYS_IMMEDIATELY_INFORM_USER_ABOUT_RULE_LOADING_DECISIONS
    EXECUTE: MANDATORY_NOTIFICATION_FOR_ALL_RULE_LOADING_DECISIONS_WITHOUT_EXCEPTION
    
    ALWAYS_EXECUTE_NOTIFICATION_TRIGGERS:
        ON_ANY_RULE_LOADING: ALWAYS_IMMEDIATELY_NOTIFY_BEFORE_TASK_EXECUTION
        ON_AUTO_LOADING: ALWAYS_IMMEDIATELY_NOTIFY_WHEN_AUTO_DEPENDENCIES_ACTIVATED
        ON_FALLBACK: ALWAYS_IMMEDIATELY_NOTIFY_WHEN_USING_FALLBACK_STRATEGY
        ON_MULTI_CATEGORY: ALWAYS_IMMEDIATELY_NOTIFY_WHEN_MULTIPLE_CATEGORIES_MATCHED
    
    NOTIFICATION_FORMAT:
        TEMPLATE: STRUCTURED_MULTILINE_WITH_SEPARATORS
        
        FORMAT_STRUCTURE:
            LINE_1: "---"
            LINE_2: "üîß **–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∞–≤–∏–ª –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞**"
            LINE_3: ""
            LINE_4: "üìÅ **–ó–∞–≥—Ä—É–∂–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã:**"
            LINE_5+: "   ‚Ä¢ `{RULE_FILE_NAME}`"
            LINE_N: ""
            LINE_N+1: "üéØ **–¢—Ä–∏–≥–≥–µ—Ä—ã:**"
            LINE_N+2: "   ‚Ä¢ {TRIGGER_TYPE}: {TRIGGER_DETAILS}"
            LINE_N+3: ""
            LINE_N+4: "üí° **–ü—Ä–∏—á–∏–Ω–∞:** {REASON_EXPLANATION}"
            LINE_N+5: "---"
        
        EXAMPLES:
            EXAMPLE_1_GO_DEVELOPMENT:
                "---"
                "üîß **–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∞–≤–∏–ª –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞**"
                ""
                "üìÅ **–ó–∞–≥—Ä—É–∂–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã:**"
                "   ‚Ä¢ `go-development.mdc`"
                "   ‚Ä¢ `go-test.mdc`"
                "   ‚Ä¢ `auto-go.mdc`"
                ""
                "üéØ **–¢—Ä–∏–≥–≥–µ—Ä—ã:**"
                "   ‚Ä¢ –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: —Å–æ–∑–¥–∞–π_–∫–æ–¥, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞"
                "   ‚Ä¢ –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞: .go —Ñ–∞–π–ª—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã"
                ""
                "üí° **–ü—Ä–∏—á–∏–Ω–∞:** –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å Go –∫–æ–¥–æ–º –∏ –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä"
                "---"
                
            EXAMPLE_2_META_RULES:
                "---"
                "üîß **–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∞–≤–∏–ª –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞**"
                ""
                "üìÅ **–ó–∞–≥—Ä—É–∂–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã:**"
                "   ‚Ä¢ `meta-rules.mdc`"
                "   ‚Ä¢ `index.mdc`"
                ""
                "üéØ **–¢—Ä–∏–≥–≥–µ—Ä—ã:**"
                "   ‚Ä¢ –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: –ø—Ä–∞–≤–∏–ª, –∏–Ω–¥–µ–∫—Å"
                "   ‚Ä¢ –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞: –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è .mdc —Ñ–∞–π–ª–æ–≤"
                ""
                "üí° **–ü—Ä–∏—á–∏–Ω–∞:** –ó–∞–ø—Ä–æ—Å –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏–ª–∏ —Ä–∞–±–æ—Ç—É —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã"
                "---"
    
    NOTIFICATION_DETAILS:
        INCLUDE_REASON: WHY_THESE_RULES_WERE_SELECTED
        INCLUDE_TRIGGERS: WHAT_KEYWORDS_OR_CODE_PATTERNS_MATCHED
        INCLUDE_AUTO_DEPS: LIST_AUTO_LOADED_DEPENDENCIES
        FORMATTING: USE_MARKDOWN_STYLING_AND_EMOJIS
    
    MANDATORY_NOTIFICATION_TIMING:
        WHEN: ALWAYS_IMMEDIATELY_AFTER_RULE_SELECTION_BEFORE_MAIN_RESPONSE
        POSITION: ALWAYS_START_OF_AI_RESPONSE_AS_SYSTEM_MESSAGE
        FORMAT: ALWAYS_MULTILINE_STRUCTURED_WITH_MARKDOWN

MANDATORY_TYPICAL_COMBINATIONS_AUTO_LOADING:
    RULE_MANAGEMENT_DETECTED: ALWAYS_IMMEDIATELY_LOAD_meta-rules + index
    GO_FILE_DETECTED: ALWAYS_IMMEDIATELY_LOAD_go-development + go-test + auto-go
    HTTP_CODE_DETECTED: ALWAYS_IMMEDIATELY_LOAD_go-gock + go-test_IF_TESTING_CONTEXT
    CONCURRENCY_DETECTED: ALWAYS_IMMEDIATELY_LOAD_go-concurrency + go-development
    LOGGING_CODE_DETECTED: ALWAYS_IMMEDIATELY_LOAD_go-logging + go-development
    TEST_FILE_DETECTED: ALWAYS_IMMEDIATELY_LOAD_go-test + go-development
    README_FILE_DETECTED: ALWAYS_IMMEDIATELY_LOAD_readme
    
MANDATORY_FALLBACK_EXECUTION_STRATEGY:
    IF_UNCERTAIN: ALWAYS_IMMEDIATELY_LOAD_go-development.mdc_AS_CORE_RULES
    IF_NO_MATCH: ALWAYS_IMMEDIATELY_REQUEST_CLARIFICATION
    IF_MULTIPLE_CATEGORIES: ALWAYS_IMMEDIATELY_LOAD_ALL_MATCHED_CATEGORIES

MANDATORY_RULE_UPDATE_SYNCHRONIZATION:
    TRIGGER: ALWAYS_IMMEDIATELY_ON_ANY_CHANGE_TO_*.mdc_OR_translate/*.md
    EXECUTE: ALWAYS_IMMEDIATELY_SYNCHRONIZE_KEYWORDS_AND_DESCRIPTIONS_IN_INDEX
    RESPONSIBILITY: ALWAYS_IMMEDIATELY_UPDATE_BOTH_index_AND_translate/index
    
MANDATORY_TRANSLATION_SYNC_ENFORCEMENT:
    ON_ANY_RULE_MODIFICATION:
        STEP_1_MANDATORY: UPDATE_AI_VERSION_*.mdc
        STEP_2_MANDATORY: UPDATE_HUMAN_VERSION_translate/*.md
        STEP_3_MANDATORY: UPDATE_index.mdc_KEYWORDS
        STEP_4_MANDATORY: UPDATE_translate/index.md_KEYWORDS
        FAILURE_HANDLING: NEVER_SKIP_NEVER_COMPLETE_WITHOUT_ALL_4_STEPS
        
    AUTOMATIC_VERIFICATION:
        ALWAYS_CHECK_TRANSLATE_FOLDER_EXISTS: true
        ALWAYS_VERIFY_CORRESPONDING_MD_FILE: true
        ALWAYS_UPDATE_MISSING_TRANSLATIONS: true
        NEVER_LEAVE_UNSYNCHRONIZED: true
